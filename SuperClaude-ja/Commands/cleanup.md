---
name: cleanup
description: "コードを体系的にクリーンアップし、デッドコードを削除し、プロジェクト構造を最適化します"
category: workflow
complexity: standard
mcp-servers: [sequential, context7]
personas: [architect, quality, security]
---

# /sc:cleanup - コードとプロジェクトのクリーンアップ

## トリガー
- コードのメンテナンスと技術的負債の削減リクエスト
- デッドコードの削除とインポートの最適化ニーズ
- プロジェクト構造の改善と整理の要件
- コードベースの衛生と品質改善の取り組み

## 使用法
```
/sc:cleanup [対象] [--type code|imports|files|all] [--safe|--aggressive] [--interactive]
```

## 行動フロー
1. **分析**: 対象スコープ全体のクリーンアップの機会と安全性の考慮事項を評価します
2. **計画**: クリーンアップアプローチを選択し、ドメインの専門知識のために適切なペルソナを起動します
3. **実行**: インテリジェントなデッドコード検出と削除により、体系的なクリーンアップを適用します
4. **検証**: テストと安全性検証を通じて機能の損失がないことを確認します
5. **報告**: 継続的なメンテナンスのための推奨事項を含むクリーンアップの概要を生成します

主要な行動:
- クリーンアップの種類に基づく複数ペルソナ（アーキテクト、品質、セキュリティ）の連携
- Context7 MCP統合によるフレームワーク固有のクリーンアップパターン
- 複雑なクリーンアップ操作のためのSequential MCPによる体系的な分析
- バックアップとロールバック機能を備えた安全第一のアプローチ

## MCP統合
- **Sequential MCP**: 複雑な多段階のクリーンアップ分析と計画のために自動起動されます
- **Context7 MCP**: フレームワーク固有のクリーンアップパターンとベストプラクティス
- **ペルソナ連携**: アーキテクト（構造）、品質（負債）、セキュリティ（資格情報）

## ツール連携
- **Read/Grep/Glob**: クリーンアップ機会のためのコード分析とパターン検出
- **Edit/MultiEdit**: 安全なコード変更と構造最適化
- **TodoWrite**: 複雑な複数ファイルのクリーンアップ操作の進捗追跡
- **Task**: 体系的な連携を必要とする大規模なクリーンアップワークフローのための委任

## 主要パターン
- **デッドコード検出**: 使用状況分析 → 依存関係検証を伴う安全な削除
- **インポートの最適化**: 依存関係分析 → 未使用インポートの削除と整理
- **構造のクリーンアップ**: アーキテクチャ分析 → ファイルの整理とモジュールの改善
- **安全性検証**: クリーンアップ前/中/後のチェック → 機能性の維持

## 事例

### 安全なコードのクリーンアップ
```
/sc:cleanup src/ --type code --safe
# 自動的な安全性検証を伴う保守的なクリーンアップ
# すべての機能を維持しながらデッドコードを削除
```

### インポートの最適化
```
/sc:cleanup --type imports --preview
# 実行せずに未使用のインポートのクリーンアップを分析して表示
# Context7パターンによるフレームワーク対応の最適化
```

### 包括的なプロジェクトのクリーンアップ
```
/sc:cleanup --type all --interactive
# 複雑な決定のためのユーザーガイダンス付きマルチドメインクリーンアップ
# 包括的な分析のためにすべてのペルソナを起動
```

### フレームワーク固有のクリーンアップ
```
/sc:cleanup components/ --aggressive
# Context7フレームワークパターンによる徹底的なクリーンアップ
# 複雑な依存関係管理のためのSequential分析
```

## 境界

**行うこと:**
- コードを体系的にクリーンアップし、デッドコードを削除し、プロジェクト構造を最適化する
- バックアップとロールバック機能を備えた包括的な安全性検証を提供する
- フレームワーク固有のパターン認識を持つインテリジェントなクリーンアップアルゴリズムを適用する

**行わないこと:**
- 十分な安全性分析と検証なしにコードを削除する
- プロジェクト固有のクリーンアップ除外やアーキテクチャ上の制約を上書きする
- 機能性を損なったり、バグを導入したりするクリーンアップ操作を適用する
